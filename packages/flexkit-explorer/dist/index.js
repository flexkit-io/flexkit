'use strict';

var lucideReact = require('lucide-react');
var react = require('react');
var toolkit = require('@graphiql/toolkit');
var react$1 = require('@graphiql/react');
var studio = require('@flexkit/studio');
var jsxRuntime = require('react/jsx-runtime');
require('@graphiql/react/dist/style.css');

var qe=Object.defineProperty;var B=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var le=(t,l,a)=>l in t?qe(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,ne=(t,l)=>{for(var a in l||(l={}))se.call(l,a)&&le(t,a,l[a]);if(B)for(var a of B(l))re.call(l,a)&&le(t,a,l[a]);return t};var de=(t,l)=>{var a={};for(var s in t)se.call(t,s)&&l.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&B)for(var s of B(t))l.indexOf(s)<0&&re.call(t,s)&&(a[s]=t[s]);return a};var ce=(t,l,a)=>new Promise((s,f)=>{var u=h=>{try{c(a.next(h));}catch(p){f(p);}},r=h=>{try{c(a.throw(h));}catch(p){f(p);}},c=h=>h.done?s(h.value):Promise.resolve(h.value).then(u,r);c((a=a.apply(t,l)).next());});function N(U){var v=U,{dangerouslyAssumeSchemaIsValid:t,confirmCloseTab:l,defaultQuery:a,defaultTabs:s,externalFragments:f,fetcher:u,getDefaultFieldNames:r,headers:c,inputValueDeprecation:h,introspectionQueryName:p,maxHistoryLength:b,onEditOperationName:A,onSchemaChange:I,onTabChange:O,onTogglePluginVisibility:S,operationName:g,plugins:J,query:d,response:y,schema:z,schemaDescription:Q,shouldPersistHeaders:T,storage:P,validationRules:H,variables:M,visiblePlugin:D,defaultHeaders:F}=v,x=de(v,["dangerouslyAssumeSchemaIsValid","confirmCloseTab","defaultQuery","defaultTabs","externalFragments","fetcher","getDefaultFieldNames","headers","inputValueDeprecation","introspectionQueryName","maxHistoryLength","onEditOperationName","onSchemaChange","onTabChange","onTogglePluginVisibility","operationName","plugins","query","response","schema","schemaDescription","shouldPersistHeaders","storage","validationRules","variables","visiblePlugin","defaultHeaders"]);var R;if(typeof u!="function")throw new TypeError("The `GraphiQL` component requires a `fetcher` function to be passed as prop.");return jsxRuntime.jsx(react$1.GraphiQLProvider,{getDefaultFieldNames:r,dangerouslyAssumeSchemaIsValid:t,defaultQuery:a,defaultHeaders:F,defaultTabs:s,externalFragments:f,fetcher:u,headers:c,inputValueDeprecation:h,introspectionQueryName:p,maxHistoryLength:b,onEditOperationName:A,onSchemaChange:I,onTabChange:O,onTogglePluginVisibility:S,plugins:J,visiblePlugin:D,operationName:g,query:d,response:y,schema:z,schemaDescription:Q,shouldPersistHeaders:T,storage:P,validationRules:H,variables:M,children:jsxRuntime.jsx(Tt,ne({confirmCloseTab:l,showPersistHeadersSettings:T!==!1,disableTabs:(R=x.disableTabs)!=null?R:!1,forcedTheme:x.forcedTheme},x))})}N.Toolbar=be;N.Footer=ge;var yt=["light","dark","system"],w="graphiql-session-tab-";function Tt(t){var ee,te,ae,ie;let l=(ee=t.isHeadersEditorEnabled)!=null?ee:!0,a=react$1.useEditorContext({nonNull:!0}),s=react$1.useExecutionContext({nonNull:!0}),f=react$1.useSchemaContext({nonNull:!0}),u=react$1.useStorageContext(),r=react$1.usePluginContext(),[c,h]=react.useState(!1),p=react.useRef(null),b=react.useMemo(()=>t.forcedTheme&&yt.includes(t.forcedTheme)?t.forcedTheme:void 0,[t.forcedTheme]),A=react$1.useCopyQuery({onCopyQuery:t.onCopyQuery}),I=react$1.useMergeQuery(),O=react$1.usePrettifyEditors(),{theme:S,setTheme:g}=react$1.useTheme(t.defaultTheme);react.useEffect(()=>{b==="system"?g(null):(b==="light"||b==="dark")&&g(b);},[b,g]),react.useEffect(()=>{r==null||r.setVisiblePlugin(r.plugins[0]);},[r]);react$1.useDragResize({direction:"horizontal",storageKey:"editorFlex"});let d=react$1.useDragResize({defaultSizeRelation:3,direction:"vertical",initiallyHidden:(()=>{if(!(t.defaultEditorToolsVisibility==="variables"||t.defaultEditorToolsVisibility==="headers"))return typeof t.defaultEditorToolsVisibility=="boolean"?t.defaultEditorToolsVisibility?void 0:"second":a.initialVariables||a.initialHeaders?void 0:"second"})(),sizeThresholdSecond:60,storageKey:"secondaryEditorFlex"}),[y,z]=react.useState(()=>t.defaultEditorToolsVisibility==="variables"||t.defaultEditorToolsVisibility==="headers"?t.defaultEditorToolsVisibility:!a.initialVariables&&a.initialHeaders&&l?"headers":"variables"),[Q,T]=react.useState(null),[P,H]=react.useState(null),M=react.Children.toArray(t.children),D=(ie=M.find(i=>pe(i,N.Toolbar)))!=null?ie:jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsx(react$1.ToolbarButton,{onClick:O,label:"Prettify query (Shift-Ctrl-P)",children:jsxRuntime.jsx(react$1.PrettifyIcon,{className:"fk-w-8 fk-h-8 fk-block","aria-hidden":"true"})}),jsxRuntime.jsx(react$1.ToolbarButton,{onClick:I,label:"Merge fragments into query (Shift-Ctrl-M)",children:jsxRuntime.jsx(react$1.MergeIcon,{className:"graphiql-toolbar-icon","aria-hidden":"true"})}),jsxRuntime.jsx(react$1.ToolbarButton,{onClick:A,label:"Copy query (Shift-Ctrl-C)",children:jsxRuntime.jsx(react$1.CopyIcon,{className:"graphiql-toolbar-icon","aria-hidden":"true"})}),(te=t.toolbar)==null?void 0:te.additionalContent,((ae=t.toolbar)==null?void 0:ae.additionalComponent)&&jsxRuntime.jsx(t.toolbar.additionalComponent,{})]}),F=M.find(i=>pe(i,N.Footer)),x=react.useCallback(()=>{try{u==null||u.clear(),H("success");}catch(i){H("error");}},[u]),U=react.useCallback(i=>{a.setShouldPersistHeaders(i.currentTarget.dataset.value==="true");},[a]),v=react.useCallback(i=>{let n=i.currentTarget.dataset.theme;g(n||null);},[g]),R=a.addTab;f.introspect;let ve=a.moveTab;react.useCallback(i=>{T(i.currentTarget.dataset.value);},[]);let ke=react.useCallback(i=>{var oe;let n=r,k=Number(i.currentTarget.dataset.index);if(!n)return;let q=(oe=n.plugins.find((qt,xe)=>k===xe))!=null?oe:null;if(q===n.visiblePlugin){n.setVisiblePlugin(null);return}n.setVisiblePlugin(q);},[r]),Y=react.useCallback(i=>{d.hiddenElement==="second"&&d.setHiddenElement(null),z(i.currentTarget.dataset.name);},[d]),Ee=react.useCallback(()=>{d.setHiddenElement(d.hiddenElement==="second"?null:"second");},[d]),Ce=react.useCallback(i=>{i||T(null);},[]),Ne=react.useCallback(i=>{i||(T(null),H(null));},[]),Z=jsxRuntime.jsx(react$1.Tooltip,{label:"Add tab",children:jsxRuntime.jsx(react$1.UnStyledButton,{type:"button",className:"graphiql-tab-add",onClick:R,"aria-label":"Add tab",children:jsxRuntime.jsx(react$1.PlusIcon,{"aria-hidden":"true"})})}),Se=t.className?` ${t.className}`:"",K=t.confirmCloseTab,Pe=react.useCallback(i=>ce(this,null,function*(){let n=i.currentTarget.previousSibling,k=Number(n.id.replace(w,""));(!K||(yield K(k)))&&(a.activeTabIndex===k&&s.stop(),a.closeTab(k));}),[K,a,s]),He=react.useCallback(i=>{let n=Number(i.currentTarget.id.replace(w,""));s.stop(),a.changeTab(n);},[a,s]);return jsxRuntime.jsx(react$1.Tooltip.Provider,{children:jsxRuntime.jsxs("div",{className:`graphiql-container${Se}`,children:[jsxRuntime.jsxs(studio.ResizablePanelGroup,{autoSaveId:"explorer",direction:"horizontal",className:"fk-h-full fk-max-h-full",children:[jsxRuntime.jsx(studio.ResizablePanel,{collapsible:!0,collapsedSize:3,minSize:10,onCollapse:()=>{h(!0);},onExpand:()=>{h(!1);},ref:p,children:jsxRuntime.jsx("div",{className:"fk-flex fk-w-full fk-h-full fk-pb-6",children:jsxRuntime.jsxs(studio.Tabs,{className:"fk-w-full",defaultValue:r==null?void 0:r.plugins[0].title,children:[jsxRuntime.jsxs("div",{className:`fk-flex fk-items-center fk-py-1 ${c?"":"fk-px-4"}`,children:[jsxRuntime.jsx(studio.TabsList,{className:c?"fk-hidden":"",children:r==null?void 0:r.plugins.map((i,n)=>{let q=`${i===r.visiblePlugin?"Hide":"Show"} ${i.title}`;return jsxRuntime.jsx(studio.TabsTrigger,{"aria-label":q,className:"fk-text-muted-foreground","data-index":n,onClick:ke,value:i.title,children:jsxRuntime.jsx(i.icon,{"aria-hidden":"true"})},i.title)})}),jsxRuntime.jsxs(studio.Tooltip,{children:[jsxRuntime.jsx(studio.TooltipTrigger,{asChild:!0,children:jsxRuntime.jsx(studio.Button,{className:c?"fk-ml-1.5":"fk-ml-auto",onClick:()=>{let i=p.current;c?i==null||i.expand():i==null||i.collapse();},size:"icon",variant:"ghost",children:c?jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsx(lucideReact.ChevronsRight,{className:"fk-w-4 fk-h-4"}),jsxRuntime.jsx("span",{className:"fk-sr-only",children:"Expand"})]}):jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[jsxRuntime.jsx(lucideReact.ChevronsLeft,{className:"fk-w-4 fk-h-4"}),jsxRuntime.jsx("span",{className:"fk-sr-only",children:"Collapse"})]})})}),jsxRuntime.jsx(studio.TooltipContent,{children:c?"Expand":"Collapse"})]})]}),c?null:jsxRuntime.jsx(studio.Separator,{}),r==null?void 0:r.plugins.map(i=>jsxRuntime.jsx(studio.TabsContent,{className:`fk-flex fk-w-full fk-max-h-full fk-mt-0 ${c?"fk-hidden":""}`,value:i.title,children:jsxRuntime.jsxs(studio.ScrollArea,{className:"fk-flex fk-w-full fk-max-h-full fk-overflow-auto fk-px-6 fk-pt-3 fk-pb-6 fk-mb-3",children:[jsxRuntime.jsx(i.content,{}),jsxRuntime.jsx(studio.ScrollBar,{orientation:"horizontal"})]})},i.title))]})})}),jsxRuntime.jsx(studio.ResizableHandle,{className:"hover:fk-bg-blue-500 fk-transition-colors",withHandle:!0}),jsxRuntime.jsx(studio.ResizablePanel,{className:"fk-p-3 fk-bg-muted",defaultSize:48,children:jsxRuntime.jsx("div",{className:"graphiql-main",children:jsxRuntime.jsxs("div",{className:"graphiql-sessions",children:[jsxRuntime.jsxs("div",{className:"graphiql-session-header",children:[!t.disableTabs&&jsxRuntime.jsx(react$1.Tabs,{values:a.tabs,onReorder:ve,"aria-label":"Select active operation",children:a.tabs.length>1&&jsxRuntime.jsxs(jsxRuntime.Fragment,{children:[a.tabs.map((i,n)=>jsxRuntime.jsxs(react$1.Tab,{value:i,isActive:n===a.activeTabIndex,children:[jsxRuntime.jsx(react$1.Tab.Button,{"aria-controls":"graphiql-session",id:`${w}${n}`,onClick:He,children:i.title}),jsxRuntime.jsx(react$1.Tab.Close,{onClick:Pe})]},i.id)),Z]})}),jsxRuntime.jsx("div",{className:"graphiql-session-header-right",children:a.tabs.length===1&&Z})]}),jsxRuntime.jsx("div",{role:"tabpanel",id:"graphiql-session",className:"graphiql-session","aria-labelledby":`${w}${a.activeTabIndex}`,children:jsxRuntime.jsxs("div",{className:`graphiql-editors${a.tabs.length===1?" full-height":""}`,children:[jsxRuntime.jsx("div",{ref:d.firstRef,children:jsxRuntime.jsxs("section",{className:"graphiql-query-editor","aria-label":"Query Editor",children:[jsxRuntime.jsx(react$1.QueryEditor,{editorTheme:t.editorTheme,keyMap:t.keyMap,onCopyQuery:t.onCopyQuery,onEdit:t.onEditQuery,readOnly:t.readOnly}),jsxRuntime.jsxs("div",{className:"graphiql-toolbar",role:"toolbar","aria-label":"Editor Commands",children:[jsxRuntime.jsx(react$1.ExecuteButton,{}),D]})]})}),jsxRuntime.jsx("div",{ref:d.dragBarRef,children:jsxRuntime.jsxs("div",{className:"graphiql-editor-tools",children:[jsxRuntime.jsx(react$1.UnStyledButton,{type:"button",className:y==="variables"&&d.hiddenElement!=="second"?"active":"",onClick:Y,"data-name":"variables",children:"Variables"}),l&&jsxRuntime.jsx(react$1.UnStyledButton,{type:"button",className:y==="headers"&&d.hiddenElement!=="second"?"active":"",onClick:Y,"data-name":"headers",children:"Headers"}),jsxRuntime.jsx(react$1.Tooltip,{label:d.hiddenElement==="second"?"Show editor tools":"Hide editor tools",children:jsxRuntime.jsx(react$1.UnStyledButton,{type:"button",onClick:Ee,"aria-label":d.hiddenElement==="second"?"Show editor tools":"Hide editor tools",className:"graphiql-toggle-editor-tools",children:d.hiddenElement==="second"?jsxRuntime.jsx(react$1.ChevronUpIcon,{className:"graphiql-chevron-icon","aria-hidden":"true"}):jsxRuntime.jsx(react$1.ChevronDownIcon,{className:"graphiql-chevron-icon","aria-hidden":"true"})})})]})}),jsxRuntime.jsxs("section",{className:"graphiql-editor-tool","aria-label":y==="variables"?"Variables":"Headers",children:[jsxRuntime.jsx(react$1.VariableEditor,{editorTheme:t.editorTheme,isHidden:y!=="variables",keyMap:t.keyMap,onEdit:t.onEditVariables,readOnly:t.readOnly}),l&&jsxRuntime.jsx(react$1.HeaderEditor,{editorTheme:t.editorTheme,isHidden:y!=="headers",keyMap:t.keyMap,onEdit:t.onEditHeaders,readOnly:t.readOnly})]})]})})]})})}),jsxRuntime.jsx(studio.ResizableHandle,{className:"hover:fk-bg-blue-500 fk-transition-colors",withHandle:!0}),jsxRuntime.jsx(studio.ResizablePanel,{className:"fk-p-3 fk-relative fk-z-50",defaultSize:30,children:jsxRuntime.jsxs("div",{className:"graphiql-response fk-h-full",children:[s.isFetching?jsxRuntime.jsx(react$1.Spinner,{}):null,jsxRuntime.jsx(react$1.ResponseEditor,{editorTheme:t.editorTheme,responseTooltip:t.responseTooltip,keyMap:t.keyMap}),F]})})]}),jsxRuntime.jsxs(react$1.Dialog,{open:Q==="short-keys",onOpenChange:Ce,children:[jsxRuntime.jsxs("div",{className:"graphiql-dialog-header",children:[jsxRuntime.jsx(react$1.Dialog.Title,{className:"graphiql-dialog-title",children:"Short Keys"}),jsxRuntime.jsx(react$1.Dialog.Close,{})]}),jsxRuntime.jsx("div",{className:"graphiql-dialog-section",children:jsxRuntime.jsx(kt,{keyMap:t.keyMap||"sublime"})})]}),jsxRuntime.jsxs(react$1.Dialog,{open:Q==="settings",onOpenChange:Ne,children:[jsxRuntime.jsxs("div",{className:"graphiql-dialog-header",children:[jsxRuntime.jsx(react$1.Dialog.Title,{className:"graphiql-dialog-title",children:"Settings"}),jsxRuntime.jsx(react$1.Dialog.Close,{})]}),t.showPersistHeadersSettings?jsxRuntime.jsxs("div",{className:"graphiql-dialog-section",children:[jsxRuntime.jsxs("div",{children:[jsxRuntime.jsx("div",{className:"graphiql-dialog-section-title",children:"Persist headers"}),jsxRuntime.jsxs("div",{className:"graphiql-dialog-section-caption",children:["Save headers upon reloading."," ",jsxRuntime.jsx("span",{className:"graphiql-warning-text",children:"Only enable if you trust this device."})]})]}),jsxRuntime.jsxs(react$1.ButtonGroup,{children:[jsxRuntime.jsx(react$1.Button,{type:"button",id:"enable-persist-headers",className:a.shouldPersistHeaders?"active":"","data-value":"true",onClick:U,children:"On"}),jsxRuntime.jsx(react$1.Button,{type:"button",id:"disable-persist-headers",className:a.shouldPersistHeaders?"":"active",onClick:U,children:"Off"})]})]}):null,!b&&jsxRuntime.jsxs("div",{className:"graphiql-dialog-section",children:[jsxRuntime.jsxs("div",{children:[jsxRuntime.jsx("div",{className:"graphiql-dialog-section-title",children:"Theme"}),jsxRuntime.jsx("div",{className:"graphiql-dialog-section-caption",children:"Adjust how the interface appears."})]}),jsxRuntime.jsxs(react$1.ButtonGroup,{children:[jsxRuntime.jsx(react$1.Button,{type:"button",className:S===null?"active":"",onClick:v,children:"System"}),jsxRuntime.jsx(react$1.Button,{type:"button",className:S==="light"?"active":"","data-theme":"light",onClick:v,children:"Light"}),jsxRuntime.jsx(react$1.Button,{type:"button",className:S==="dark"?"active":"","data-theme":"dark",onClick:v,children:"Dark"})]})]}),u?jsxRuntime.jsxs("div",{className:"graphiql-dialog-section",children:[jsxRuntime.jsxs("div",{children:[jsxRuntime.jsx("div",{className:"graphiql-dialog-section-title",children:"Clear storage"}),jsxRuntime.jsx("div",{className:"graphiql-dialog-section-caption",children:"Remove all locally stored data and start fresh."})]}),jsxRuntime.jsx(react$1.Button,{type:"button",state:P||void 0,disabled:P==="success",onClick:x,children:{success:"Cleared data",error:"Failed"}[P]||"Clear data"})]}):null]})]})})}var X=react$1.isMacOs?"\u2318":"Ctrl",vt=Object.entries({"Search in editor":[X,"F"],"Search in documentation":[X,"K"],"Execute query":[X,"Enter"],"Prettify editors":["Ctrl","Shift","P"],"Merge fragments definitions into operation definition":["Ctrl","Shift","M"],"Copy query":["Ctrl","Shift","C"],"Re-fetch schema using introspection":["Ctrl","Shift","R"]});function kt({keyMap:t}){return jsxRuntime.jsxs("div",{children:[jsxRuntime.jsxs("table",{className:"graphiql-table",children:[jsxRuntime.jsx("thead",{children:jsxRuntime.jsxs("tr",{children:[jsxRuntime.jsx("th",{children:"Short Key"}),jsxRuntime.jsx("th",{children:"Function"})]})}),jsxRuntime.jsx("tbody",{children:vt.map(([l,a])=>jsxRuntime.jsxs("tr",{children:[jsxRuntime.jsx("td",{children:a.map((s,f,u)=>jsxRuntime.jsxs(react.Fragment,{children:[jsxRuntime.jsx("code",{className:"graphiql-key",children:s}),f!==u.length-1&&" + "]},s))}),jsxRuntime.jsx("td",{children:l})]},l))})]}),jsxRuntime.jsxs("p",{children:["The editors use"," ",jsxRuntime.jsx("a",{href:"https://codemirror.net/5/doc/manual.html#keymaps",target:"_blank",rel:"noopener noreferrer",children:"CodeMirror Key Maps"})," ","that add more short keys. This instance of Graph",jsxRuntime.jsx("em",{children:"i"}),"QL uses ",jsxRuntime.jsx("code",{children:t}),"."]})]})}function be(t){return jsxRuntime.jsx(jsxRuntime.Fragment,{children:t.children})}be.displayName="GraphiQLToolbar";function ge(t){return jsxRuntime.jsx("div",{className:"graphiql-footer",children:t.children})}ge.displayName="GraphiQLFooter";function pe(t,l){var a;return (a=t==null?void 0:t.type)!=null&&a.displayName&&t.type.displayName===l.displayName?!0:t.type===l}function ye(){let t="https://abcdefghij.api.flexkit.io/graphql",l=react.useMemo(()=>toolkit.createGraphiQLFetcher({url:t}),[t]);return jsxRuntime.jsx(N,{fetcher:l})}function jt(){return {name:"flexkit.explorer",contributes:{apps:[{name:"explorer",icon:jsxRuntime.jsx(lucideReact.SquarePlay,{strokeWidth:1.5}),title:"Explorer",component:jsxRuntime.jsx(ye,{}),routes:[]}]}}}

exports.Explorer = jt;
